<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>CI_process (datakit-ci.CI_process)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">datakit-ci</a> &#x00BB; CI_process</nav><h1>Module <code>CI_process</code></h1><p>Convenience wrappers around <code>Lwt_process</code>.</p></header><dl><dt class="spec value" id="val-run_with_exit_status"><a href="#val-run_with_exit_status" class="anchor"></a><code><span class="keyword">val</span> run_with_exit_status : ?&#8288;switch:Lwt_switch.t <span>&#45;&gt;</span> ?&#8288;log:<a href="../CI_live_log/index.html#type-t">CI_live_log.t</a> <span>&#45;&gt;</span> ?&#8288;cwd:string <span>&#45;&gt;</span> ?&#8288;env:string array <span>&#45;&gt;</span> ?&#8288;stdin:Lwt_process.redirection <span>&#45;&gt;</span> output:(string <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> ?&#8288;stderr:(string <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> ?&#8288;log_cmd:Lwt_process.command <span>&#45;&gt;</span> Lwt_process.command <span>&#45;&gt;</span> Unix.process_status Lwt.t</code></dt><dd><p>Run <code>cmd</code>, passing each chunk of output it produces on stdout to <code>output</code> and each chunk on stderr to <code>stderr</code>. If <code>stderr</code> is not given, <code>output</code> is used for both. Returns the exit status of the process when completed. If <code>log_cmd</code> is given, it is displayed in all log messages instead of <code>cmd</code>. This is useful to hide secret tokens, etc.</p></dd></dl><dl><dt class="spec value" id="val-run"><a href="#val-run" class="anchor"></a><code><span class="keyword">val</span> run : ?&#8288;switch:Lwt_switch.t <span>&#45;&gt;</span> ?&#8288;log:<a href="../CI_live_log/index.html#type-t">CI_live_log.t</a> <span>&#45;&gt;</span> ?&#8288;cwd:string <span>&#45;&gt;</span> ?&#8288;env:string array <span>&#45;&gt;</span> ?&#8288;stdin:Lwt_process.redirection <span>&#45;&gt;</span> output:(string <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> ?&#8288;stderr:(string <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> ?&#8288;log_cmd:Lwt_process.command <span>&#45;&gt;</span> Lwt_process.command <span>&#45;&gt;</span> unit Lwt.t</code></dt><dd><p>Run <code>cmd</code>, passing each chunk of output it produces on stdout to <code>output</code> and each chunk on stderr to <code>stderr</code>. If <code>stderr</code> is not given, <code>output</code> is used for both. Raises an exception if the process doesn't return an exit status of zero.</p></dd></dl><dl><dt class="spec value" id="val-check_status"><a href="#val-check_status" class="anchor"></a><code><span class="keyword">val</span> check_status : Lwt_process.command <span>&#45;&gt;</span> Unix.process_status <span>&#45;&gt;</span> unit</code></dt><dd><p><code>check_status cmd status</code> checks that <code>status</code> is a successful exit status. If not, it raises an exception giving <code>cmd</code> as the cause.</p></dd></dl></div></body></html>