<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Branch (datakit-client-git.Datakit_client_git.Branch)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">datakit-client-git</a> &#x00BB; <a href="../index.html">Datakit_client_git</a> &#x00BB; Branch</nav><h1>Module <code>Datakit_client_git.Branch</code></h1></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>A <code>t</code> is a named pointer to a commit.</p></dd></dl><dl><dt class="spec value" id="val-name"><a href="#val-name" class="anchor"></a><code><span class="keyword">val</span> name : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>name t</code> is <code>t</code>'s name.</p></dd></dl><dl><dt class="spec value" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span class="keyword">val</span> remove : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>unit <a href="../index.html#type-result">result</a></span></code></dt><dd><p><code>remove t</code> deletes branch <code>t</code>. If <code>t</code> does not exist, this does nothing.</p></dd></dl><dl><dt class="spec value" id="val-head"><a href="#val-head" class="anchor"></a><code><span class="keyword">val</span> head : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><a href="../Commit/index.html#type-t">Commit.t</a> option</span> <a href="../index.html#type-result">result</a></span></code></dt><dd><p><code>head t</code> is the current head of the branch, or <code>None</code> if it doesn't currently exist.</p></dd></dl><dl><dt class="spec value" id="val-wait_for_head"><a href="#val-wait_for_head" class="anchor"></a><code><span class="keyword">val</span> wait_for_head : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;switch:Lwt_switch.t</span> <span>&#45;&gt;</span> <span>(<span><a href="../Commit/index.html#type-t">Commit.t</a> option</span> <span>&#45;&gt;</span> <span><span>[ <span>`Finish of <span class="type-var">'a</span></span> <span>| `Again</span> <span>| `Abort</span> ]</span> <a href="../index.html#type-result">result</a></span>)</span> <span>&#45;&gt;</span> <span><span>[ `Abort <span><span>| `Finish</span> of <span class="type-var">'a</span></span> ]</span> <a href="../index.html#type-result">result</a></span></code></dt><dd><p><code>wait_for_head t fn</code> calls <code>fn commit</code> on the current commit. If it returns <code>`Again</code> then it waits for the commit to change and tries again. If <code>switch</code> is provided, then turning off the switch will make the wait return <code>`Abort</code> at the next opportunity.</p></dd></dl><dl><dt class="spec value" id="val-wait_for_path"><a href="#val-wait_for_path" class="anchor"></a><code><span class="keyword">val</span> wait_for_path : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;switch:Lwt_switch.t</span> <span>&#45;&gt;</span> <a href="../../../datakit-client/Datakit_client/Path/index.html#type-t">Datakit_client.Path.t</a> <span>&#45;&gt;</span> <span>(<span><span>[ <span>`File of Cstruct.t</span> <span><span>| `Dir</span> of <a href="../Tree/index.html#type-t">Tree.t</a></span> <span><span>| `Link</span> of string</span> <span><span>| `Exec</span> of Cstruct.t</span> ]</span> option</span> <span>&#45;&gt;</span> <span><span>[ <span>`Finish of <span class="type-var">'a</span></span> <span>| `Again</span> <span>| `Abort</span> ]</span> <a href="../index.html#type-result">result</a></span>)</span> <span>&#45;&gt;</span> <span><span>[ `Abort <span><span>| `Finish</span> of <span class="type-var">'a</span></span> ]</span> <a href="../index.html#type-result">result</a></span></code></dt><dd><p><code>wait_for_path</code> is similar to <code>wait_for_head</code>, but waits for a particular sub-tree to change.</p></dd></dl><dl><dt class="spec value" id="val-fast_forward"><a href="#val-fast_forward" class="anchor"></a><code><span class="keyword">val</span> fast_forward : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Commit/index.html#type-t">Commit.t</a> <span>&#45;&gt;</span> <span>unit <a href="../index.html#type-result">result</a></span></code></dt><dd><p><code>fast_forward t commit</code> changes <code>t</code> to point to <code>commit</code> if <code>t</code>'s head is an ancestor of <code>commit</code> (or returns an error if not).</p></dd></dl><dl><dt class="spec value" id="val-with_transaction"><a href="#val-with_transaction" class="anchor"></a><code><span class="keyword">val</span> with_transaction : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>(<a href="../Transaction/index.html#type-t">Transaction.t</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-result">result</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-result">result</a></span></code></dt><dd><p><code>with_transaction t fn</code> is the result of applying <code>fn</code> to a new transaction on branch <code>t</code>. If the transaction has not been committed when <code>fn trans</code> returns, the transaction is aborted (and a warning is logged). Use <code>Transaction.abort</code> to avoid the warning.</p></dd></dl><dl><dt class="spec value" id="val-transaction"><a href="#val-transaction" class="anchor"></a><code><span class="keyword">val</span> transaction : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../Transaction/index.html#type-t">Transaction.t</a> <a href="../index.html#type-result">result</a></span></code></dt><dd><p><code>transaction t</code> creates a new transaction on top of the branch <code>t</code>. Must be closed with <a href="../Transaction/index.html#val-abort"><code>Transaction.abort</code></a> or <a href="../Transaction/index.html#val-commit"><code>Transaction.commit</code></a>. Use <a href="index.html#val-with_transaction"><code>with_transaction</code></a> to not have to worry about resource leaks..</p></dd></dl></div></body></html>