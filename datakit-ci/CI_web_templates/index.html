<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>CI_web_templates (datakit-ci.CI_web_templates)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">datakit-ci</a> &#x00BB; CI_web_templates</nav><h1>Module <code>CI_web_templates</code></h1><p>Generate HTML for the various pages in the UI.</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = <span class="keyword">private</span> </code><code>{</code><table class="record"><tr id="type-t.name" class="anchored"><td class="def field"><a href="#type-t.name" class="anchor"></a><code>name : string;</code></td></tr><tr id="type-t.state_repo" class="anchored"><td class="def field"><a href="#type-t.state_repo" class="anchor"></a><code>state_repo : <span>Uri.t option</span>;</code></td></tr><tr id="type-t.metrics_token" class="anchored"><td class="def field"><a href="#type-t.metrics_token" class="anchor"></a><code>metrics_token : <span><span>[ <span>`SHA256 of Cstruct.t</span> ]</span> option</span>;</code></td></tr><tr id="type-t.listen_addr" class="anchored"><td class="def field"><a href="#type-t.listen_addr" class="anchor"></a><code>listen_addr : <span>[ <span>`HTTP of int</span> <span><span>| `HTTPS</span> of int</span> ]</span>;</code></td></tr><tr id="type-t.github_scopes_needed" class="anchored"><td class="def field"><a href="#type-t.github_scopes_needed" class="anchor"></a><code>github_scopes_needed : <span>Github_t.scope list</span>;</code></td></tr><tr id="type-t.can_read" class="anchored"><td class="def field"><a href="#type-t.can_read" class="anchor"></a><code>can_read : <a href="../CI_ACL/index.html#type-t">CI_ACL.t</a>;</code></td></tr><tr id="type-t.can_build" class="anchored"><td class="def field"><a href="#type-t.can_build" class="anchor"></a><code>can_build : <a href="../CI_ACL/index.html#type-t">CI_ACL.t</a>;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-config"><a href="#val-config" class="anchor"></a><code><span class="keyword">val</span> config : <span>?&#8288;name:string</span> <span>&#45;&gt;</span> <span>?&#8288;state_repo:Uri.t</span> <span>&#45;&gt;</span> <span>?&#8288;metrics_token:<span>[ <span>`SHA256 of string</span> ]</span></span> <span>&#45;&gt;</span> <span>?&#8288;listen_addr:<span>[ <span>`HTTP of int</span> <span><span>| `HTTPS</span> of int</span> ]</span></span> <span>&#45;&gt;</span> <span>?&#8288;github_scopes_needed:<span>Github_t.scope list</span></span> <span>&#45;&gt;</span> <span>can_read:<a href="../CI_ACL/index.html#type-t">CI_ACL.t</a></span> <span>&#45;&gt;</span> <span>can_build:<a href="../CI_ACL/index.html#type-t">CI_ACL.t</a></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>config ~name ~state_repo ()</code> is a web configuration. If <code>name</code> is given, it is used as the main heading, and also as the name of the session cookie (useful if you run multiple CIs on the same host, on different ports). If <code>state_repo</code> is given, it is used to construct links to the state repository on GitHub.</p></dd></dl><dl><dt class="spec type" id="type-page"><a href="#type-page" class="anchor"></a><code><span class="keyword">type</span> page</code><code> = <span>user:<span>string option</span></span> <span>&#45;&gt;</span> <span><span>[ `Html ]</span> Tyxml.Html.elt</span></code></dt></dl><div class="spec module" id="module-Error"><a href="#module-Error" class="anchor"></a><code><span class="keyword">module</span> <a href="Error/index.html">Error</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-login_page"><a href="#val-login_page" class="anchor"></a><code><span class="keyword">val</span> login_page : <span>?&#8288;github:Uri.t</span> <span>&#45;&gt;</span> <span>csrf_token:string</span> <span>&#45;&gt;</span> <a href="../CI_form/State/index.html#type-t">CI_form.State.t</a> <span>&#45;&gt;</span> <span>is_configured:bool</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-page">page</a></code></dt><dt class="spec value" id="val-auth_setup"><a href="#val-auth_setup" class="anchor"></a><code><span class="keyword">val</span> auth_setup : <span>csrf_token:string</span> <span>&#45;&gt;</span> <a href="../CI_form/State/index.html#type-t">CI_form.State.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-page">page</a></code></dt><dt class="spec value" id="val-user_page"><a href="#val-user_page" class="anchor"></a><code><span class="keyword">val</span> user_page : <span>csrf_token:string</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-page">page</a></code></dt><dt class="spec value" id="val-main_page"><a href="#val-main_page" class="anchor"></a><code><span class="keyword">val</span> main_page : <span>csrf_token:string</span> <span>&#45;&gt;</span> <span>ci:<a href="../CI_engine/index.html#type-t">CI_engine.t</a></span> <span>&#45;&gt;</span> <span>dashboards:<span><a href="../CI_target/index.html#module-Set">CI_target.Set</a>.t <a href="../../datakit-github/Datakit_github/Repo/index.html#module-Map">Datakit_github.Repo.Map</a>.t</span></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-page">page</a></code></dt><dt class="spec value" id="val-prs_page"><a href="#val-prs_page" class="anchor"></a><code><span class="keyword">val</span> prs_page : <span>ci:<a href="../CI_engine/index.html#type-t">CI_engine.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-page">page</a></code></dt><dt class="spec value" id="val-branches_page"><a href="#val-branches_page" class="anchor"></a><code><span class="keyword">val</span> branches_page : <span>ci:<a href="../CI_engine/index.html#type-t">CI_engine.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-page">page</a></code></dt><dt class="spec value" id="val-tags_page"><a href="#val-tags_page" class="anchor"></a><code><span class="keyword">val</span> tags_page : <span>ci:<a href="../CI_engine/index.html#type-t">CI_engine.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-page">page</a></code></dt><dt class="spec value" id="val-commit_page"><a href="#val-commit_page" class="anchor"></a><code><span class="keyword">val</span> commit_page : <span>?&#8288;test:string</span> <span>&#45;&gt;</span> <span>commit:string</span> <span>&#45;&gt;</span> <span>archived_targets:<span><span>(<a href="../CI_target/index.html#type-t">CI_target.t</a> * <a href="../CI_utils/DK/Commit/index.html#type-t">CI_utils.DK.Commit.t</a>)</span> list</span></span> <span>&#45;&gt;</span> <span><a href="../CI_target/index.html#type-t">CI_target.t</a> list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-page">page</a></code></dt><dt class="spec value" id="val-target_page"><a href="#val-target_page" class="anchor"></a><code><span class="keyword">val</span> target_page : <span>?&#8288;test:string</span> <span>&#45;&gt;</span> <span>csrf_token:string</span> <span>&#45;&gt;</span> <span>?&#8288;title:string</span> <span>&#45;&gt;</span> <span>target:<a href="../CI_target/index.html#type-t">CI_target.t</a></span> <span>&#45;&gt;</span> <a href="../CI_history/State/index.html#type-t">CI_history.State.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-page">page</a></code></dt><dt class="spec value" id="val-live_log_frame"><a href="#val-live_log_frame" class="anchor"></a><code><span class="keyword">val</span> live_log_frame : <span>branch:string</span> <span>&#45;&gt;</span> <span>have_history:bool</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-page">page</a></code></dt><dt class="spec value" id="val-saved_log_frame"><a href="#val-saved_log_frame" class="anchor"></a><code><span class="keyword">val</span> saved_log_frame : <span>commit:string</span> <span>&#45;&gt;</span> <span>branch:string</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-page">page</a></code></dt><dt class="spec value" id="val-plain_error"><a href="#val-plain_error" class="anchor"></a><code><span class="keyword">val</span> plain_error : string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-page">page</a></code></dt><dd><p>A basic page just the error text and no header, footer, etc.</p></dd></dl><dl><dt class="spec value" id="val-error_page"><a href="#val-error_page" class="anchor"></a><code><span class="keyword">val</span> error_page : string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-page">page</a></code></dt></dl><div class="spec module" id="module-Settings"><a href="#module-Settings" class="anchor"></a><code><span class="keyword">module</span> <a href="Settings/index.html">Settings</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-saved_log_frame_link"><a href="#val-saved_log_frame_link" class="anchor"></a><code><span class="keyword">val</span> saved_log_frame_link : <span>branch:string</span> <span>&#45;&gt;</span> <span>commit:string</span> <span>&#45;&gt;</span> string</code></dt><dd><p><code>saved_log_frame_link ~branch ~commit</code> is the path component of the iframe link for the given saved log.</p></dd></dl></div></body></html>