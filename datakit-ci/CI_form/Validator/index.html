<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Validator (datakit-ci.CI_form.Validator)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">datakit-ci</a> &#x00BB; <a href="../index.html">CI_form</a> &#x00BB; Validator</nav><h1>Module <code>CI_form.Validator</code></h1></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'a t</span></code></dt><dd><p>An <code>'a t</code> is a validator that parses a form and, on success, returns an <code>'a</code>.</p></dd></dl><dl><dt class="spec type" id="type-reader"><a href="#type-reader" class="anchor"></a><code><span class="keyword">type</span> <span>'a reader</span></code><code> = string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../index.html#type-or_error">or_error</a></span></code></dt></dl><dl><dt class="spec value" id="val-maybe"><a href="#val-maybe" class="anchor"></a><code><span class="keyword">val</span> maybe : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>maybe x</code> is a validator that successfully returns <code>x</code> if there were no other validation errors.</p></dd></dl><dl><dt class="spec value" id="val-fail"><a href="#val-fail" class="anchor"></a><code><span class="keyword">val</span> fail : string <span>&#45;&gt;</span> <span>msg:string</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>fail field ~msg</code> is a validation that fails, reporting <code>msg</code> against <code>field</code>.</p></dd></dl><dl><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val</span> get : string <span>&#45;&gt;</span> <span>(string <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, string)</span> Stdlib.result</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>get field conv</code> gets the uploaded field named <code>field</code> and processes it with <code>conv</code>. If <code>conv</code> fails, an error is reported against <code>field</code>.</p></dd></dl><dl><dt class="spec value" id="val-string"><a href="#val-string" class="anchor"></a><code><span class="keyword">val</span> string : <span>string <a href="index.html#type-reader">reader</a></span></code></dt><dd><p><code>string s</code> always accepts <code>s</code>.</p></dd></dl><dl><dt class="spec value" id="val-uri"><a href="#val-uri" class="anchor"></a><code><span class="keyword">val</span> uri : <span>Uri.t <a href="index.html#type-reader">reader</a></span></code></dt><dd><p><code>uri s</code> tries to parse <code>s</code> as a Uri.</p></dd></dl><dl><dt class="spec value" id="val-non_empty"><a href="#val-non_empty" class="anchor"></a><code><span class="keyword">val</span> non_empty : <span>string <a href="index.html#type-reader">reader</a></span></code></dt><dd><p><code>non_empty s</code> accepts <code>s</code> if it is not the empty string.</p></dd></dl><dl><dt class="spec value" id="val-confirm"><a href="#val-confirm" class="anchor"></a><code><span class="keyword">val</span> confirm : string <span>&#45;&gt;</span> <span>unit <a href="index.html#type-reader">reader</a></span></code></dt><dd><p><code>confirm x y</code> accepts <code>y</code> if it is the same as <code>x</code> (useful for enter-this-twice confirmation fields).</p></dd></dl><dl><dt class="spec value" id="val-optional"><a href="#val-optional" class="anchor"></a><code><span class="keyword">val</span> optional : <span><span class="type-var">'a</span> <a href="index.html#type-reader">reader</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> option</span> <a href="index.html#type-reader">reader</a></span></code></dt><dd><p><code>optional x</code> is a reader that returns <code>None</code> for the empty string, while using <code>x</code> to read non-empty strings.</p></dd></dl><dl><dt class="spec value" id="val-(&gt;&gt;!=)"><a href="#val-(&gt;&gt;!=)" class="anchor"></a><code><span class="keyword">val</span> (&gt;&gt;!=) : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>x &gt;&gt;!= f</code> is <code>f y</code> if the validator <code>x</code> successfully produces <code>y</code>.</p></dd></dl><dl><dt class="spec value" id="val-(&lt;*&gt;)"><a href="#val-(&lt;*&gt;)" class="anchor"></a><code><span class="keyword">val</span> (&lt;*&gt;) : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>x &lt;*&gt; y</code> validates <code>x</code> and <code>y</code> and, if both are successful, returns the pair of values. If either fails, all errors are reported.</p></dd></dl><dl><dt class="spec value" id="val-run"><a href="#val-run" class="anchor"></a><code><span class="keyword">val</span> run : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>[ <span>`String of string</span> <span><span>| `File</span> of Multipart.file</span> ]</span> Multipart.StringMap.t</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <a href="../State/index.html#type-t">State.t</a>)</span> Stdlib.result</span></code></dt><dd><p><code>run v form_data</code> runs validator <code>v</code> on form data uploaded by the user. It returns <code>'a</code> on success, or a <code>State.t</code> if there were any validation errors.</p></dd></dl></div></body></html>