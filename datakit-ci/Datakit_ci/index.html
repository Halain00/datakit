<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Datakit_ci (datakit-ci.Datakit_ci)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">datakit-ci</a> &#x00BB; Datakit_ci</nav><h1>Module <code>Datakit_ci</code></h1><p>Datakit CI</p><p><code>Datakit_ci</code> is a library to describe reproducible, cachable and distributed computations. The library is specialiazed to handle build pipelines, where computations can take time, and where seeing the live outputs of the computation is as useful as the final step (think of live-logs of long-running builds).</p><p>The <a href="index.html#core"><span>Core</span></a> of <code>Datakit_ci</code> are <a href="Term/index.html"><span>term</span></a>combinators to describe the composition of long-running computation jobs, with an attached, individual <a href="Output/index.html"><span>output</span></a> (which can be <span class="xref-unresolved" title="unresolved reference to &quot;livelogs&quot;"><span>live</span></span>). A project <span class="xref-unresolved" title="unresolved reference to &quot;config&quot;"><span>configuration</span></span> tied together a collection of job description and a simple description for the <span class="xref-unresolved" title="unresolved reference to &quot;web&quot;"><span>web</span></span> interface, whose access is granted using <span class="xref-unresolved" title="unresolved reference to &quot;acl&quot;"><span>ACLs</span></span>.</p><p>TODO.</p><nav class="toc"><ul><li><a href="#core">Core</a></li><li><a href="#extensions">Extensions</a></li><li><a href="#cache">Cache</a></li><li><a href="#utils">Utils</a></li></ul></nav></header><section><header><h2 id="core"><a href="#core" class="anchor"></a>Core</h2></header><dl><dt class="spec module" id="module-DK"><a href="#module-DK" class="anchor"></a><code><span class="keyword">module</span> DK : Datakit_client.S</code></dt><dd><p>Datakit client library.</p></dd></dl><div class="spec module" id="module-Live_log"><a href="#module-Live_log" class="anchor"></a><code><span class="keyword">module</span> <a href="Live_log/index.html">Live_log</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Output"><a href="#module-Output" class="anchor"></a><code><span class="keyword">module</span> <a href="Output/index.html">Output</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec type" id="type-status"><a href="#type-status" class="anchor"></a><code><span class="keyword">type</span> 'a status</code><code> = </code><code>{</code><table class="record"><tr id="type-status.result" class="anchored"><td class="def field"><a href="#type-status.result" class="anchor"></a><code>result : (<span class="type-var">'a</span>, [ `Pending of string * unit Lwt.t | `Failure of string ]) Stdlib.result;</code></td></tr><tr id="type-status.output" class="anchored"><td class="def field"><a href="#type-status.output" class="anchor"></a><code>output : <a href="Output/index.html#type-logs">Output.logs</a>;</code></td></tr></table><code>}</code></dt><dd><p>The type for term status. It is a mix between the usual error monad, but where we also keep a local log for every computation. Morever, computation can be long-running, so there is a new <code>`Pending</code> state with an indication of when the term is complete.</p></dd></dl><dl><dt class="spec type" id="type-job_id"><a href="#type-job_id" class="anchor"></a><code><span class="keyword">type</span> job_id</code></dt><dd><p>The type for job IDs. They are used to identfy the worker actually doing the computation.</p></dd></dl><div class="spec module" id="module-Target"><a href="#module-Target" class="anchor"></a><code><span class="keyword">module</span> <a href="Target/index.html">Target</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Term"><a href="#module-Term" class="anchor"></a><code><span class="keyword">module</span> <a href="Term/index.html">Term</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-ACL"><a href="#module-ACL" class="anchor"></a><code><span class="keyword">module</span> <a href="ACL/index.html">ACL</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Web"><a href="#module-Web" class="anchor"></a><code><span class="keyword">module</span> <a href="Web/index.html">Web</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Config"><a href="#module-Config" class="anchor"></a><code><span class="keyword">module</span> <a href="Config/index.html">Config</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-run"><a href="#val-run" class="anchor"></a><code><span class="keyword">val</span> run : ?&#8288;info:Cmdliner.Term.info <span>&#45;&gt;</span> <a href="Config/index.html#type-t">Config.t</a> Cmdliner.Term.t <span>&#45;&gt;</span> unit</code></dt><dd><p><code>run ?info config</code> runs DataKitCI. <code>info</code> defaults to a term that describes the binary as <code>DataKitCI</code>, but does not include any of the other metadata such as versioning. Call <span class="xref-unresolved" title="unresolved reference to &quot;Cmdliner.Term.info&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Cmdliner.Term&quot;"><code>Cmdliner</code>.Term</span>.info</span> directly to obtain an <code>info</code> value that exposes all this extra data on the resulting command line.</p></dd></dl><dl><dt class="spec value" id="val-logs"><a href="#val-logs" class="anchor"></a><code><span class="keyword">val</span> logs : <a href="Live_log/index.html#type-manager">Live_log.manager</a></code></dt><dd><p>The singleton log manager.</p></dd></dl></section><section><header><h2 id="extensions"><a href="#extensions" class="anchor"></a>Extensions</h2></header><div class="spec module" id="module-Process"><a href="#module-Process" class="anchor"></a><code><span class="keyword">module</span> <a href="Process/index.html">Process</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Monitored_pool"><a href="#module-Monitored_pool" class="anchor"></a><code><span class="keyword">module</span> <a href="Monitored_pool/index.html">Monitored_pool</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Git"><a href="#module-Git" class="anchor"></a><code><span class="keyword">module</span> <a href="Git/index.html">Git</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Docker"><a href="#module-Docker" class="anchor"></a><code><span class="keyword">module</span> <a href="Docker/index.html">Docker</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h2 id="cache"><a href="#cache" class="anchor"></a>Cache</h2></header><div class="spec module-type" id="module-type-BUILDER"><a href="#module-type-BUILDER" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-BUILDER/index.html">BUILDER</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Cache"><a href="#module-Cache" class="anchor"></a><code><span class="keyword">module</span> <a href="Cache/index.html">Cache</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h2 id="utils"><a href="#utils" class="anchor"></a>Utils</h2><p>This should probably be replaced by something else or not be exposed at all.</p></header><div class="spec module" id="module-Utils"><a href="#module-Utils" class="anchor"></a><code><span class="keyword">module</span> <a href="Utils/index.html">Utils</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><aside><p>/ *</p></aside><div class="spec module" id="module-Private"><a href="#module-Private" class="anchor"></a><code><span class="keyword">module</span> <a href="Private/index.html">Private</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section></div></body></html>