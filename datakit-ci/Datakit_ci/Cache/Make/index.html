<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make (datakit-ci.Datakit_ci.Cache.Make)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">datakit-ci</a> &#x00BB; <a href="../../index.html">Datakit_ci</a> &#x00BB; <a href="../index.html">Cache</a> &#x00BB; Make</nav><h1>Module <code>Cache.Make</code></h1></header><h3 class="heading">Parameters</h3><ul><li><code><a href="argument-1-B/index.html">B</a> : <a href="../../index.html#module-type-BUILDER">BUILDER</a></code></li></ul><h3 class="heading">Signature</h3><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>A <code>t</code> is a cache of values created by <code>B</code>.</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : logs:<a href="../../Live_log/index.html#type-manager">Live_log.manager</a> <span>&#45;&gt;</span> <a href="argument-1-B/index.html#type-t">B.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>create ~logs b</code> is a fresh cache that maps keys of type <code>B.Key.t</code> to values of type <code>B.value</code>.</p></dd></dl><dl><dt class="spec value" id="val-lookup"><a href="#val-lookup" class="anchor"></a><code><span class="keyword">val</span> lookup : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <a href="../../index.html#module-DK">DK</a>.t Lwt.t) <span>&#45;&gt;</span> <a href="argument-1-B/index.html#type-context">B.context</a> <span>&#45;&gt;</span> <a href="argument-1-B/Key/index.html#type-t">B.Key.t</a> <span>&#45;&gt;</span> <a href="argument-1-B/index.html#type-value">B.value</a> <a href="../../index.html#type-status">status</a> Lwt.t</code></dt><dd><p><code>lookup t conn ~rebuild ctx key</code> returns the cached value of <code>key</code>, or uses <code>B.generate ctx key</code> to start the process of calculating the value if this is the first time <code>key</code> has been requested. If <code>rebuild</code> is <code>true</code> then any complete cached result is ignored (we mark the result branch as needing a rebuild and build again anyway).</p></dd></dl><dl><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val</span> find : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="argument-1-B/index.html#type-context">B.context</a> <span>&#45;&gt;</span> <a href="argument-1-B/Key/index.html#type-t">B.Key.t</a> <span>&#45;&gt;</span> <a href="argument-1-B/index.html#type-value">B.value</a> <a href="../../Term/index.html#type-t">Term.t</a></code></dt><dd><p><code>find t key</code> is the terms which evaluates to the result of looking up <code>key</code> in the cache (using <code>lookup</code>).</p></dd></dl></div></body></html>