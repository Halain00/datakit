<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Dir (datakit-server.Vfs.Dir)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">datakit-server</a> &#x00BB; <a href="../index.html">Vfs</a> &#x00BB; Dir</nav><h1>Module <code>Vfs.Dir</code></h1><p>Directory operations.</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>The type for directories.</p></dd></dl><dl><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : <span><a href="index.html#type-t">t</a> Fmt.t</span></code></dt><dd><p><code>pp</code> is a pretty-printer for directories.</p></dd></dl><dl><dt class="spec value" id="val-ls"><a href="#val-ls" class="anchor"></a><code><span class="keyword">val</span> ls : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><a href="../Inode/index.html#type-t">Inode.t</a> list</span> <a href="../index.html#type-or_err">or_err</a></span></code></dt><dd><p>The <code>ls</code> commands.</p></dd></dl><dl><dt class="spec value" id="val-mkfile"><a href="#val-mkfile" class="anchor"></a><code><span class="keyword">val</span> mkfile : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;perm:<a href="../index.html#type-perm">perm</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><a href="../Inode/index.html#type-t">Inode.t</a> <a href="../index.html#type-or_err">or_err</a></span></code></dt><dd><p>The <code>mkfile</code> command.</p></dd></dl><dl><dt class="spec value" id="val-lookup"><a href="#val-lookup" class="anchor"></a><code><span class="keyword">val</span> lookup : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><a href="../Inode/index.html#type-t">Inode.t</a> <a href="../index.html#type-or_err">or_err</a></span></code></dt><dd><p>The <code>lookup</code> command.</p></dd></dl><dl><dt class="spec value" id="val-mkdir"><a href="#val-mkdir" class="anchor"></a><code><span class="keyword">val</span> mkdir : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><a href="../Inode/index.html#type-t">Inode.t</a> <a href="../index.html#type-or_err">or_err</a></span></code></dt><dd><p>The <code>mkdir</code> command.</p></dd></dl><dl><dt class="spec value" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span class="keyword">val</span> remove : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>unit <a href="../index.html#type-or_err">or_err</a></span></code></dt><dd><p>The <code>remove</code> command. FIXME: shouldn't it be string -&gt; unit?</p></dd></dl><dl><dt class="spec value" id="val-rename"><a href="#val-rename" class="anchor"></a><code><span class="keyword">val</span> rename : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Inode/index.html#type-t">Inode.t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span>unit <a href="../index.html#type-or_err">or_err</a></span></code></dt><dd><p>The <code>rename</code> command.</p></dd></dl><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : <a href="index.html#type-t">t</a></code></dt><dd><p><code>empty</code> is the empty directory.</p></dd></dl><dl><dt class="spec value" id="val-of_list"><a href="#val-of_list" class="anchor"></a><code><span class="keyword">val</span> of_list : <span>(unit <span>&#45;&gt;</span> <span><span><a href="../Inode/index.html#type-t">Inode.t</a> list</span> <a href="../index.html#type-or_err">or_err</a></span>)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>of_list l</code> is a read-only, static directory containing only the inodes <code>l</code>. The sub-directories are re-evaluated on every <code>ls</code> and <code>read</code>.</p></dd></dl><dl><dt class="spec value" id="val-of_map_ref"><a href="#val-of_map_ref" class="anchor"></a><code><span class="keyword">val</span> of_map_ref : <span><span><a href="../Inode/index.html#type-t">Inode.t</a> Astring.String.Map.t</span> Stdlib.ref</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>of_map_ref m</code> is a read-only directory containing the inodes defined in <code>m</code>. The content of the directory is computed dynamically by accessing elements in the map on every access.</p></dd></dl><dl><dt class="spec value" id="val-read_only"><a href="#val-read_only" class="anchor"></a><code><span class="keyword">val</span> read_only : <span>ls:<span>(unit <span>&#45;&gt;</span> <span><span><a href="../Inode/index.html#type-t">Inode.t</a> list</span> <a href="../index.html#type-or_err">or_err</a></span>)</span></span> <span>&#45;&gt;</span> <span>lookup:<span>(string <span>&#45;&gt;</span> <span><a href="../Inode/index.html#type-t">Inode.t</a> <a href="../index.html#type-or_err">or_err</a></span>)</span></span> <span>&#45;&gt;</span> <span>remove:<span>(unit <span>&#45;&gt;</span> <span>unit <a href="../index.html#type-or_err">or_err</a></span>)</span></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>read_only</code> is a read-only directory. FIXME.</p></dd></dl><dl><dt class="spec value" id="val-dir_only"><a href="#val-dir_only" class="anchor"></a><code><span class="keyword">val</span> dir_only : <span>ls:<span>(unit <span>&#45;&gt;</span> <span><span><a href="../Inode/index.html#type-t">Inode.t</a> list</span> <a href="../index.html#type-or_err">or_err</a></span>)</span></span> <span>&#45;&gt;</span> <span>lookup:<span>(string <span>&#45;&gt;</span> <span><a href="../Inode/index.html#type-t">Inode.t</a> <a href="../index.html#type-or_err">or_err</a></span>)</span></span> <span>&#45;&gt;</span> <span>mkdir:<span>(string <span>&#45;&gt;</span> <span><a href="../Inode/index.html#type-t">Inode.t</a> <a href="../index.html#type-or_err">or_err</a></span>)</span></span> <span>&#45;&gt;</span> <span>remove:<span>(unit <span>&#45;&gt;</span> <span>unit <a href="../index.html#type-or_err">or_err</a></span>)</span></span> <span>&#45;&gt;</span> <span>rename:<span>(<a href="../Inode/index.html#type-t">Inode.t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span>unit <a href="../index.html#type-or_err">or_err</a></span>)</span></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>dir_only</code> is a directory which contains only directories. FIXME.</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : <span>ls:<span>(unit <span>&#45;&gt;</span> <span><span><a href="../Inode/index.html#type-t">Inode.t</a> list</span> <a href="../index.html#type-or_err">or_err</a></span>)</span></span> <span>&#45;&gt;</span> <span>mkfile:<span>(string <span>&#45;&gt;</span> <a href="../index.html#type-perm">perm</a> <span>&#45;&gt;</span> <span><a href="../Inode/index.html#type-t">Inode.t</a> <a href="../index.html#type-or_err">or_err</a></span>)</span></span> <span>&#45;&gt;</span> <span>lookup:<span>(string <span>&#45;&gt;</span> <span><a href="../Inode/index.html#type-t">Inode.t</a> <a href="../index.html#type-or_err">or_err</a></span>)</span></span> <span>&#45;&gt;</span> <span>mkdir:<span>(string <span>&#45;&gt;</span> <span><a href="../Inode/index.html#type-t">Inode.t</a> <a href="../index.html#type-or_err">or_err</a></span>)</span></span> <span>&#45;&gt;</span> <span>remove:<span>(unit <span>&#45;&gt;</span> <span>unit <a href="../index.html#type-or_err">or_err</a></span>)</span></span> <span>&#45;&gt;</span> <span>rename:<span>(<a href="../Inode/index.html#type-t">Inode.t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span>unit <a href="../index.html#type-or_err">or_err</a></span>)</span></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>creae</code> is a generic directory.</p></dd></dl><dl><dt class="spec value" id="val-err_read_only"><a href="#val-err_read_only" class="anchor"></a><code><span class="keyword">val</span> err_read_only : <span><span class="type-var">'a</span> <a href="../index.html#type-or_err">or_err</a></span></code></dt><dd><h2 id="errors"><a href="#errors" class="anchor"></a>Errors</h2></dd></dl><dl><dt class="spec value" id="val-err_already_exists"><a href="#val-err_already_exists" class="anchor"></a><code><span class="keyword">val</span> err_already_exists : <span><span class="type-var">'a</span> <a href="../index.html#type-or_err">or_err</a></span></code></dt><dt class="spec value" id="val-err_dir_only"><a href="#val-err_dir_only" class="anchor"></a><code><span class="keyword">val</span> err_dir_only : <span><span class="type-var">'a</span> <a href="../index.html#type-or_err">or_err</a></span></code></dt><dt class="spec value" id="val-err_no_entry"><a href="#val-err_no_entry" class="anchor"></a><code><span class="keyword">val</span> err_no_entry : <span><span class="type-var">'a</span> <a href="../index.html#type-or_err">or_err</a></span></code></dt></dl></div></body></html>